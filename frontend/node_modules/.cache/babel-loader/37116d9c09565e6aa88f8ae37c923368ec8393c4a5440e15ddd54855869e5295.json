{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nimport fadeBackground from \"../components/modals/FadeBackground\";\nconst initialState = {\n  modals: {},\n  // 등록된 모달들\n  modalStack: [],\n  // 모달의 이름만 저장\n  fadeBackground: false // 열린 페이지가 흐린 화면 처리\n};\nconst modalStackSlice = createSlice({\n  name: 'modalStack',\n  initialState,\n  reducers: {\n    // 모달을 사용하려면, 등록해야 함\n    registerModal: (state, action) => {\n      const {\n        modalName,\n        setModalShow,\n        setModalInfo\n      } = action.payload;\n      if (!state.modals[modalName]) modals[modalName] = {\n        'modalName': modalName,\n        'setModalShow': setModalShow,\n        'setModalInfo': setModalInfo\n      };\n    },\n    // 모달을 띄워줌\n    showModal: (state, action) => {\n      const modalName = action.payload;\n      if (!state.modals[modalName]) throw new Error(`등록되지 않은 모달 '${modalName}'`);\n\n      // 스택에 해당 모달이 있다면 제거\n      state.modalStack = state.modalStack.filter(modal => modal.modalName !== modalName);\n\n      // 만약 현재 열린 모달을 제외하고, 이전에 열린 모달(들)이 존재할 경우, z-index 처리와 fade 처리\n      for (let i = 0; state.modalStack.length; i++) {\n        state.modalStack[i].setModalInfo({\n          'fade': true,\n          'z': (i + 1) * 10\n        });\n      }\n\n      // 스택에 모달 푸시\n      state.modalStack.push(modals[modalName]);\n\n      // 모달 z-index 처리와 fade 처리\n      state.modalStack[state.modalStack.length - 1].setModalInfo({\n        'fade': false,\n        'z': state.modalStack.length * 10\n      });\n\n      // 모달 보이게 하기\n      state.modalStack[state.modalStack.length - 1].setModalShow(true);\n    },\n    // 가장 나중에 뜬 모달을 닫아줌\n    popModal: state => {\n      console.log('');\n    }\n  }\n});\nexport const {\n  registerModal,\n  showModal,\n  popModal\n} = modalStackSlice.actions;\nexport default modalStackSlice.reducer;","map":{"version":3,"names":["createSlice","fadeBackground","initialState","modals","modalStack","modalStackSlice","name","reducers","registerModal","state","action","modalName","setModalShow","setModalInfo","payload","showModal","Error","filter","modal","i","length","push","popModal","console","log","actions","reducer"],"sources":["/home/hyogun/바탕화면/dumbo/frontend/src/redux/modalStackSlice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\nimport fadeBackground from \"../components/modals/FadeBackground\";\n\nconst initialState = \n{\n    modals : {},     // 등록된 모달들\n    modalStack : [], // 모달의 이름만 저장\n    fadeBackground : false // 열린 페이지가 흐린 화면 처리\n};\n\nconst modalStackSlice = createSlice(\n    {\n        name : 'modalStack',\n        initialState,\n        reducers :\n        {\n            // 모달을 사용하려면, 등록해야 함\n            registerModal : (state, action) =>\n            {\n                const { modalName, setModalShow, setModalInfo } = action.payload;\n                if (!state.modals[modalName]) modals[modalName] = { 'modalName' : modalName, 'setModalShow' : setModalShow, 'setModalInfo' : setModalInfo };\n            },\n\n            // 모달을 띄워줌\n            showModal : (state, action) =>\n            {\n                const modalName = action.payload;\n                if (!state.modals[modalName]) throw new Error(`등록되지 않은 모달 '${modalName}'`);\n                \n                // 스택에 해당 모달이 있다면 제거\n                state.modalStack = state.modalStack.filter( (modal) => modal.modalName !== modalName);\n\n                // 만약 현재 열린 모달을 제외하고, 이전에 열린 모달(들)이 존재할 경우, z-index 처리와 fade 처리\n                for (let i=0; state.modalStack.length; i++) { state.modalStack[i].setModalInfo({ 'fade' : true, 'z' : (i+1)*10 }); }\n\n                // 스택에 모달 푸시\n                state.modalStack.push(modals[modalName]);\n\n                // 모달 z-index 처리와 fade 처리\n                state.modalStack[state.modalStack.length-1].setModalInfo({ 'fade' : false, 'z' : state.modalStack.length*10 })\n\n                // 모달 보이게 하기\n                state.modalStack[state.modalStack.length-1].setModalShow(true);\n            },\n\n            // 가장 나중에 뜬 모달을 닫아줌\n            popModal : (state) =>\n            {\n                console.log('');\n            }\n        },\n    }\n);\n\nexport const { registerModal, showModal, popModal } = modalStackSlice.actions;\nexport default modalStackSlice.reducer;"],"mappings":"AAAA,SAASA,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,cAAc,MAAM,qCAAqC;AAEhE,MAAMC,YAAY,GAClB;EACIC,MAAM,EAAG,CAAC,CAAC;EAAM;EACjBC,UAAU,EAAG,EAAE;EAAE;EACjBH,cAAc,EAAG,KAAK,CAAC;AAC3B,CAAC;AAED,MAAMI,eAAe,GAAGL,WAAW,CAC/B;EACIM,IAAI,EAAG,YAAY;EACnBJ,YAAY;EACZK,QAAQ,EACR;IACI;IACAC,aAAa,EAAGA,CAACC,KAAK,EAAEC,MAAM,KAC9B;MACI,MAAM;QAAEC,SAAS;QAAEC,YAAY;QAAEC;MAAa,CAAC,GAAGH,MAAM,CAACI,OAAO;MAChE,IAAI,CAACL,KAAK,CAACN,MAAM,CAACQ,SAAS,CAAC,EAAER,MAAM,CAACQ,SAAS,CAAC,GAAG;QAAE,WAAW,EAAGA,SAAS;QAAE,cAAc,EAAGC,YAAY;QAAE,cAAc,EAAGC;MAAa,CAAC;IAC/I,CAAC;IAED;IACAE,SAAS,EAAGA,CAACN,KAAK,EAAEC,MAAM,KAC1B;MACI,MAAMC,SAAS,GAAGD,MAAM,CAACI,OAAO;MAChC,IAAI,CAACL,KAAK,CAACN,MAAM,CAACQ,SAAS,CAAC,EAAE,MAAM,IAAIK,KAAK,CAAC,eAAeL,SAAS,GAAG,CAAC;;MAE1E;MACAF,KAAK,CAACL,UAAU,GAAGK,KAAK,CAACL,UAAU,CAACa,MAAM,CAAGC,KAAK,IAAKA,KAAK,CAACP,SAAS,KAAKA,SAAS,CAAC;;MAErF;MACA,KAAK,IAAIQ,CAAC,GAAC,CAAC,EAAEV,KAAK,CAACL,UAAU,CAACgB,MAAM,EAAED,CAAC,EAAE,EAAE;QAAEV,KAAK,CAACL,UAAU,CAACe,CAAC,CAAC,CAACN,YAAY,CAAC;UAAE,MAAM,EAAG,IAAI;UAAE,GAAG,EAAG,CAACM,CAAC,GAAC,CAAC,IAAE;QAAG,CAAC,CAAC;MAAE;;MAEnH;MACAV,KAAK,CAACL,UAAU,CAACiB,IAAI,CAAClB,MAAM,CAACQ,SAAS,CAAC,CAAC;;MAExC;MACAF,KAAK,CAACL,UAAU,CAACK,KAAK,CAACL,UAAU,CAACgB,MAAM,GAAC,CAAC,CAAC,CAACP,YAAY,CAAC;QAAE,MAAM,EAAG,KAAK;QAAE,GAAG,EAAGJ,KAAK,CAACL,UAAU,CAACgB,MAAM,GAAC;MAAG,CAAC,CAAC;;MAE9G;MACAX,KAAK,CAACL,UAAU,CAACK,KAAK,CAACL,UAAU,CAACgB,MAAM,GAAC,CAAC,CAAC,CAACR,YAAY,CAAC,IAAI,CAAC;IAClE,CAAC;IAED;IACAU,QAAQ,EAAIb,KAAK,IACjB;MACIc,OAAO,CAACC,GAAG,CAAC,EAAE,CAAC;IACnB;EACJ;AACJ,CACJ,CAAC;AAED,OAAO,MAAM;EAAEhB,aAAa;EAAEO,SAAS;EAAEO;AAAS,CAAC,GAAGjB,eAAe,CAACoB,OAAO;AAC7E,eAAepB,eAAe,CAACqB,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}