{"ast":null,"code":"var _jsxFileName = \"/home/hyogun/\\uBC14\\uD0D5\\uD654\\uBA74/dumbo/frontend/src/components/ScrollTest.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { FixedSizeList as List } from \"react-window\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ITEM_HEIGHT = 150;\nconst BUFFER = 40;\nconst fakeFetchPost = async index => {\n  // 0.1초 지연을 주어 비동기처럼 보이게 함\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve({\n        title: `게시글 ${index}`,\n        previewText: `이것은 게시글 ${index}의 미리보기입니다.`\n      });\n    }, 100);\n  });\n};\nconst ScrollTest = () => {\n  _s();\n  const [posts, setPosts] = useState(new Map());\n  const [visibleIndexes, setVisibleIndexes] = useState({\n    start: 0,\n    stop: 0\n  });\n  const listRef = useRef(null);\n\n  // 렌더 시마다 loadAround가 재정의되지 않도록 useEffect 안에 정의\n  useEffect(() => {\n    const loadAround = async (startIndex, stopIndex) => {\n      const newPosts = new Map(posts);\n      for (let i = startIndex; i <= stopIndex; i++) {\n        if (!newPosts.has(i)) {\n          const post = await fakeFetchPost(i);\n          if (post) {\n            newPosts.set(i, post);\n          }\n        }\n      }\n      const min = Math.max(0, startIndex - BUFFER);\n      const max = stopIndex + BUFFER;\n      for (let key of newPosts.keys()) {\n        if (key < min || key > max) {\n          newPosts.delete(key);\n        }\n      }\n      setPosts(new Map(newPosts));\n    };\n    loadAround(visibleIndexes.start, visibleIndexes.stop);\n  }, [visibleIndexes]); // posts 의존성 제거\n\n  const Row = ({\n    index,\n    style\n  }) => {\n    const post = posts.get(index);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        ...style,\n        padding: 10,\n        borderBottom: \"1px solid #ccc\"\n      },\n      children: post ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: post.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: post.previewText\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"\\uB85C\\uB529 \\uC911...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(List, {\n    className: \"scrollbar-none\",\n    height: 600,\n    itemCount: 10000,\n    itemSize: ITEM_HEIGHT,\n    width: \"100%\",\n    ref: listRef,\n    onItemsRendered: ({\n      visibleStartIndex,\n      visibleStopIndex\n    }) => {\n      setVisibleIndexes({\n        start: visibleStartIndex,\n        stop: visibleStopIndex\n      });\n    },\n    children: Row\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n};\n_s(ScrollTest, \"xGZX77KQKkiDQGl3A5ZABr6E+Tc=\");\n_c = ScrollTest;\nexport default ScrollTest;\nvar _c;\n$RefreshReg$(_c, \"ScrollTest\");","map":{"version":3,"names":["React","useState","useEffect","useRef","FixedSizeList","List","jsxDEV","_jsxDEV","Fragment","_Fragment","ITEM_HEIGHT","BUFFER","fakeFetchPost","index","Promise","resolve","setTimeout","title","previewText","ScrollTest","_s","posts","setPosts","Map","visibleIndexes","setVisibleIndexes","start","stop","listRef","loadAround","startIndex","stopIndex","newPosts","i","has","post","set","min","Math","max","key","keys","delete","Row","style","get","padding","borderBottom","children","fileName","_jsxFileName","lineNumber","columnNumber","className","height","itemCount","itemSize","width","ref","onItemsRendered","visibleStartIndex","visibleStopIndex","_c","$RefreshReg$"],"sources":["/home/hyogun/바탕화면/dumbo/frontend/src/components/ScrollTest.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { FixedSizeList as List } from \"react-window\";\n\nconst ITEM_HEIGHT = 150;\nconst BUFFER = 40;\n\nconst fakeFetchPost = async (index) => {\n  // 0.1초 지연을 주어 비동기처럼 보이게 함\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      resolve({\n        title: `게시글 ${index}`,\n        previewText: `이것은 게시글 ${index}의 미리보기입니다.`,\n      });\n    }, 100);\n  });\n};\n\nconst ScrollTest = () => {\n  const [posts, setPosts] = useState(new Map());\n  const [visibleIndexes, setVisibleIndexes] = useState({ start: 0, stop: 0 });\n  const listRef = useRef(null);\n\n  // 렌더 시마다 loadAround가 재정의되지 않도록 useEffect 안에 정의\n  useEffect(() => {\n    const loadAround = async (startIndex, stopIndex) => {\n      const newPosts = new Map(posts);\n\n      for (let i = startIndex; i <= stopIndex; i++) {\n        if (!newPosts.has(i)) {\n          const post = await fakeFetchPost(i);\n          if (post) {\n            newPosts.set(i, post);\n          }\n        }\n      }\n\n      const min = Math.max(0, startIndex - BUFFER);\n      const max = stopIndex + BUFFER;\n\n      for (let key of newPosts.keys()) {\n        if (key < min || key > max) {\n          newPosts.delete(key);\n        }\n      }\n\n      setPosts(new Map(newPosts));\n    };\n\n    loadAround(visibleIndexes.start, visibleIndexes.stop);\n  }, [visibleIndexes]); // posts 의존성 제거\n\n  const Row = ({ index, style }) => {\n    const post = posts.get(index);\n\n    return (\n      <div style={{ ...style, padding: 10, borderBottom: \"1px solid #ccc\" }}>\n        {post ? (\n          <>\n            <h3>{post.title}</h3>\n            <p>{post.previewText}</p>\n          </>\n        ) : (\n          <div>로딩 중...</div>\n        )}\n      </div>\n    );\n  };\n\n  return (\n    <List\n    className=\"scrollbar-none\"\n      height={600}\n      itemCount={10000}\n      itemSize={ITEM_HEIGHT}\n      width=\"100%\"\n      ref={listRef}\n      onItemsRendered={({ visibleStartIndex, visibleStopIndex }) => {\n        setVisibleIndexes({ start: visibleStartIndex, stop: visibleStopIndex });\n      }}\n    >\n      {Row}\n    </List>\n  );\n};\n\nexport default ScrollTest;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}