{"ast":null,"code":"var _jsxFileName = \"/home/hyogun/\\uBC14\\uD0D5\\uD654\\uBA74/dumbo/frontend/react/src/postTest/CommentsSection.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport axios from 'axios';\nimport PostRequestWithAccessToken from '../api/axios/requestWithAccessToken';\nimport { ChevronDown } from \"lucide-react\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function CommentsSection({\n  comments,\n  onToggle,\n  postId,\n  isLoading,\n  replyTo,\n  setReplyTo\n}) {\n  _s();\n  const [newCommentText, setNewCommentText] = useState('');\n  const accessToken = useSelector(state => state.auth.accessToken);\n  const handleWriteComment = async () => {\n    if (!newCommentText.trim()) return;\n    try {\n      const payload = {\n        content: newCommentText\n      };\n      let url = '/comment/' + postId;\n      if (replyTo !== null && replyTo !== void 0 && replyTo.commentId) {\n        url += '/' + replyTo.commentId;\n      }\n      await PostRequestWithAccessToken(accessToken, url, payload);\n      setNewCommentText('');\n      setReplyTo(null);\n      // TODO: 작성 후 댓글 목록 갱신 필요 시 상위에서 처리\n    } catch (error) {\n      console.error('댓글/답글 작성 실패', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-4 border rounded bg-gray-50 overflow-y-auto max-h-96 flex flex-col\",\n    style: {\n      height: '100%'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"text-sm font-semibold mb-2\",\n      children: \"\\uB313\\uAE00\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"text-sm text-gray-700 space-y-6 flex-grow overflow-y-auto mb-4 pr-2\",\n      children: comments.map(comment => /*#__PURE__*/_jsxDEV(CommentItem, {\n        comment: comment,\n        onToggle: onToggle,\n        onReply: () => setReplyTo({\n          commentId: comment.comment_id,\n          authorNickname: comment.author_nickname,\n          commentContent: comment.content\n        }),\n        postId: postId\n      }, comment.comment_id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pt-3 border-t border-gray-300\",\n      children: [replyTo && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-2 px-3 py-2 bg-gray-100 border border-gray-300 rounded text-sm text-gray-800 relative\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-1 font-semibold\",\n          children: replyTo.authorNickname\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-gray-600 italic break-words line-clamp-2\",\n          children: replyTo.commentContent\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setReplyTo(null),\n          className: \"absolute top-2 right-2 text-xs text-red-500 hover:underline\",\n          children: \"\\u2715 \\uCDE8\\uC18C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: e => {\n          e.preventDefault();\n          handleWriteComment();\n        },\n        className: \"flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-grow relative\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex w-full border rounded overflow-hidden\",\n            children: [replyTo && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"bg-gray-200 text-gray-700 text-sm px-2 flex items-center whitespace-nowrap\",\n              children: [\"@\", replyTo.authorNickname]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: newCommentText,\n              onChange: e => setNewCommentText(e.target.value),\n              placeholder: replyTo ? '답글을 입력하세요...' : '댓글을 입력하세요',\n              className: \"flex-grow px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400\",\n              style: {\n                borderTopLeftRadius: replyTo ? 0 : '0.375rem',\n                borderBottomLeftRadius: replyTo ? 0 : '0.375rem'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: `ml-2 bg-blue-500 hover:bg-blue-600 text-white rounded px-4 py-2 text-sm ${newCommentText.trim() ? 'cursor-pointer' : 'cursor-not-allowed opacity-50'}`,\n          disabled: !newCommentText.trim(),\n          children: \"\\uC4F0\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 5\n  }, this);\n}\n_s(CommentsSection, \"mUakN1jwMvIyAQLmaJGQWx1w2vU=\", false, function () {\n  return [useSelector];\n});\n_c = CommentsSection;\nfunction CommentItem({\n  comment,\n  onToggle,\n  onReply,\n  postId\n}) {\n  _s2();\n  const [showReplies, setShowReplies] = useState(false);\n  const [replies, setReplies] = useState([]);\n  const [loadingReplies, setLoadingReplies] = useState(false);\n  const [createdAtCursor, setCreatedAtCursor] = useState(null);\n  const [replyIdCursor, setReplyIdCursor] = useState(null);\n  const [newlyAddedReplyId, setNewlyAddedReplyId] = useState(null);\n  const repliesStartRef = useRef(null);\n  const {\n    comment_id,\n    author_nickname,\n    content,\n    created_at,\n    reply_count = 0\n  } = comment;\n  const fetchMoreReplies = async () => {\n    if (loadingReplies) return;\n    setLoadingReplies(true);\n    try {\n      const params = {};\n      if (createdAtCursor) params.createdAtCursor = createdAtCursor;\n      if (replyIdCursor) params.replyIdCursor = replyIdCursor;\n      const url = `http://localhost:8080/dumbo-backend/comment/${postId}/${comment_id}`;\n      const response = await axios.get(url, {\n        params\n      });\n      const newReplies = response.data.data || [];\n      if (newReplies.length > 0) {\n        setReplies(prev => [...prev, ...newReplies]);\n        setNewlyAddedReplyId(newReplies[0].comment_id);\n        const last = newReplies[newReplies.length - 1];\n        setCreatedAtCursor(last.created_at);\n        setReplyIdCursor(last.comment_id);\n\n        // 새로 불러온 첫 답글로 스크롤 이동\n        setTimeout(() => {\n          var _repliesStartRef$curr;\n          (_repliesStartRef$curr = repliesStartRef.current) === null || _repliesStartRef$curr === void 0 ? void 0 : _repliesStartRef$curr.scrollIntoView({\n            behavior: 'smooth'\n          });\n        }, 100);\n      }\n    } catch (error) {\n      console.error('답글 더보기 실패', error);\n    } finally {\n      setLoadingReplies(false);\n    }\n  };\n  const handleToggleReplies = () => {\n    const next = !showReplies;\n    setShowReplies(next);\n    if (next && replies.length === 0) {\n      fetchMoreReplies();\n    }\n    if (onToggle) onToggle(comment_id, next);\n  };\n\n  // 남은 답글 개수 계산 (reply_count - 불러온 답글 수)\n  const remainingRepliesCount = reply_count - replies.length;\n  return /*#__PURE__*/_jsxDEV(\"li\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center space-x-2 mb-1 text-gray-800 font-semibold text-base\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: author_nickname\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-xs text-gray-400\",\n        children: new Date(created_at * 1000).toLocaleString()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-2 text-gray-700 cursor-pointer hover:bg-gray-100 p-1 rounded\",\n      onClick: onReply,\n      children: content\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 7\n    }, this), reply_count > 0 && !showReplies && /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleToggleReplies,\n      className: \"text-sm text-blue-500 hover:underline\",\n      type: \"button\",\n      disabled: loadingReplies,\n      children: loadingReplies ? '로딩 중...' : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(ChevronDown, {\n          className: \"w-5 h-5 inline-block\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 44\n        }, this), ` 답글 ${reply_count}개`]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 9\n    }, this), showReplies && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"ml-6 mt-3 space-y-4 border-l-2 border-gray-300 pl-4\",\n        children: replies.map(reply => /*#__PURE__*/_jsxDEV(\"li\", {\n          ref: reply.comment_id === newlyAddedReplyId ? repliesStartRef : null,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-2 text-gray-800 font-semibold text-base\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: reply.author_nickname\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs text-gray-400\",\n              children: new Date(reply.created_at * 1000).toLocaleString()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-gray-700\",\n            children: reply.content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 17\n          }, this)]\n        }, reply.comment_id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 11\n      }, this), remainingRepliesCount > 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: fetchMoreReplies,\n        className: \"text-sm text-blue-500 hover:underline mt-2\",\n        disabled: loadingReplies,\n        type: \"button\",\n        children: loadingReplies ? '로딩 중...' : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(ChevronDown, {\n            className: \"w-4 h-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 48\n          }, this), `답글 ${remainingRepliesCount}개`]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-end mt-2\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleToggleReplies,\n          className: \"text-sm text-blue-500 hover:underline\",\n          type: \"button\",\n          children: \"\\uB2F5\\uAE00 \\uC228\\uAE30\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 184,\n    columnNumber: 5\n  }, this);\n}\n_s2(CommentItem, \"3ONX3176ZwrvjbpoKiSAfHpfcZs=\");\n_c2 = CommentItem;\nvar _c, _c2;\n$RefreshReg$(_c, \"CommentsSection\");\n$RefreshReg$(_c2, \"CommentItem\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useSelector","axios","PostRequestWithAccessToken","ChevronDown","jsxDEV","_jsxDEV","Fragment","_Fragment","CommentsSection","comments","onToggle","postId","isLoading","replyTo","setReplyTo","_s","newCommentText","setNewCommentText","accessToken","state","auth","handleWriteComment","trim","payload","content","url","commentId","error","console","className","style","height","children","fileName","_jsxFileName","lineNumber","columnNumber","map","comment","CommentItem","onReply","comment_id","authorNickname","author_nickname","commentContent","onClick","onSubmit","e","preventDefault","type","value","onChange","target","placeholder","borderTopLeftRadius","borderBottomLeftRadius","disabled","_c","_s2","showReplies","setShowReplies","replies","setReplies","loadingReplies","setLoadingReplies","createdAtCursor","setCreatedAtCursor","replyIdCursor","setReplyIdCursor","newlyAddedReplyId","setNewlyAddedReplyId","repliesStartRef","created_at","reply_count","fetchMoreReplies","params","response","get","newReplies","data","length","prev","last","setTimeout","_repliesStartRef$curr","current","scrollIntoView","behavior","handleToggleReplies","next","remainingRepliesCount","Date","toLocaleString","reply","ref","_c2","$RefreshReg$"],"sources":["/home/hyogun/바탕화면/dumbo/frontend/react/src/postTest/CommentsSection.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport axios from 'axios';\nimport PostRequestWithAccessToken from '../api/axios/requestWithAccessToken';\nimport { ChevronDown } from \"lucide-react\"\n\nexport default function CommentsSection({\n  comments,\n  onToggle,\n  postId,\n  isLoading,\n  replyTo,\n  setReplyTo,\n}) {\n  const [newCommentText, setNewCommentText] = useState('');\n  const accessToken = useSelector((state) => state.auth.accessToken);\n\n  const handleWriteComment = async () => {\n    if (!newCommentText.trim()) return;\n    try {\n      const payload = {\n        content: newCommentText,\n      };\n      let url = '/comment/' + postId;\n\n      if (replyTo?.commentId) {\n        url += '/' + replyTo.commentId;\n      }\n\n      await PostRequestWithAccessToken(accessToken, url, payload);\n      setNewCommentText('');\n      setReplyTo(null);\n      // TODO: 작성 후 댓글 목록 갱신 필요 시 상위에서 처리\n    } catch (error) {\n      console.error('댓글/답글 작성 실패', error);\n    }\n  };\n\n  return (\n    <div className=\"p-4 border rounded bg-gray-50 overflow-y-auto max-h-96 flex flex-col\" style={{ height: '100%' }}>\n      <h3 className=\"text-sm font-semibold mb-2\">댓글</h3>\n\n      <ul className=\"text-sm text-gray-700 space-y-6 flex-grow overflow-y-auto mb-4 pr-2\">\n        {comments.map((comment) => (\n          <CommentItem\n            key={comment.comment_id}\n            comment={comment}\n            onToggle={onToggle}\n            onReply={() =>\n              setReplyTo({\n                commentId: comment.comment_id,\n                authorNickname: comment.author_nickname,\n                commentContent: comment.content,\n              })\n            }\n            postId={postId}\n          />\n        ))}\n      </ul>\n\n      <div className=\"pt-3 border-t border-gray-300\">\n        {replyTo && (\n          <div className=\"mb-2 px-3 py-2 bg-gray-100 border border-gray-300 rounded text-sm text-gray-800 relative\">\n            <div className=\"mb-1 font-semibold\">{replyTo.authorNickname}</div>\n            <div className=\"text-gray-600 italic break-words line-clamp-2\">\n              {replyTo.commentContent}\n            </div>\n            <button\n              onClick={() => setReplyTo(null)}\n              className=\"absolute top-2 right-2 text-xs text-red-500 hover:underline\"\n            >\n              ✕ 취소\n            </button>\n          </div>\n        )}\n\n        <form\n          onSubmit={(e) => {\n            e.preventDefault();\n            handleWriteComment();\n          }}\n          className=\"flex items-center\"\n        >\n          <div className=\"flex-grow relative\">\n            <div className=\"flex w-full border rounded overflow-hidden\">\n              {replyTo && (\n                <span className=\"bg-gray-200 text-gray-700 text-sm px-2 flex items-center whitespace-nowrap\">\n                  @{replyTo.authorNickname}\n                </span>\n              )}\n              <input\n                type=\"text\"\n                value={newCommentText}\n                onChange={(e) => setNewCommentText(e.target.value)}\n                placeholder={replyTo ? '답글을 입력하세요...' : '댓글을 입력하세요'}\n                className=\"flex-grow px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400\"\n                style={{\n                  borderTopLeftRadius: replyTo ? 0 : '0.375rem',\n                  borderBottomLeftRadius: replyTo ? 0 : '0.375rem',\n                }}\n              />\n            </div>\n          </div>\n          <button\n            type=\"submit\"\n            className={`ml-2 bg-blue-500 hover:bg-blue-600 text-white rounded px-4 py-2 text-sm ${\n              newCommentText.trim() ? 'cursor-pointer' : 'cursor-not-allowed opacity-50'\n            }`}\n            disabled={!newCommentText.trim()}\n          >\n            쓰기\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n}\n\nfunction CommentItem({ comment, onToggle, onReply, postId }) {\n  const [showReplies, setShowReplies] = useState(false);\n  const [replies, setReplies] = useState([]);\n  const [loadingReplies, setLoadingReplies] = useState(false);\n  const [createdAtCursor, setCreatedAtCursor] = useState(null);\n  const [replyIdCursor, setReplyIdCursor] = useState(null);\n  const [newlyAddedReplyId, setNewlyAddedReplyId] = useState(null);\n\n  const repliesStartRef = useRef(null);\n\n  const {\n    comment_id,\n    author_nickname,\n    content,\n    created_at,\n    reply_count = 0,\n  } = comment;\n\n  const fetchMoreReplies = async () => {\n    if (loadingReplies) return;\n    setLoadingReplies(true);\n\n    try {\n      const params = {};\n      if (createdAtCursor) params.createdAtCursor = createdAtCursor;\n      if (replyIdCursor) params.replyIdCursor = replyIdCursor;\n\n      const url = `http://localhost:8080/dumbo-backend/comment/${postId}/${comment_id}`;\n      const response = await axios.get(url, { params });\n\n      const newReplies = response.data.data || [];\n\n      if (newReplies.length > 0) {\n        setReplies((prev) => [...prev, ...newReplies]);\n        setNewlyAddedReplyId(newReplies[0].comment_id);\n\n        const last = newReplies[newReplies.length - 1];\n        setCreatedAtCursor(last.created_at);\n        setReplyIdCursor(last.comment_id);\n\n        // 새로 불러온 첫 답글로 스크롤 이동\n        setTimeout(() => {\n          repliesStartRef.current?.scrollIntoView({ behavior: 'smooth' });\n        }, 100);\n      }\n    } catch (error) {\n      console.error('답글 더보기 실패', error);\n    } finally {\n      setLoadingReplies(false);\n    }\n  };\n\n  const handleToggleReplies = () => {\n    const next = !showReplies;\n    setShowReplies(next);\n    if (next && replies.length === 0) {\n      fetchMoreReplies();\n    }\n    if (onToggle) onToggle(comment_id, next);\n  };\n\n  // 남은 답글 개수 계산 (reply_count - 불러온 답글 수)\n  const remainingRepliesCount = reply_count - replies.length;\n\n  return (\n    <li>\n      <div className=\"flex items-center space-x-2 mb-1 text-gray-800 font-semibold text-base\">\n        <span>{author_nickname}</span>\n        <span className=\"text-xs text-gray-400\">\n          {new Date(created_at * 1000).toLocaleString()}\n        </span>\n      </div>\n\n      <div\n        className=\"mb-2 text-gray-700 cursor-pointer hover:bg-gray-100 p-1 rounded\"\n        onClick={onReply}\n      >\n        {content}\n      </div>\n\n      {/* 답글이 있고, 답글 리스트가 닫혀있으면 */}\n      {reply_count > 0 && !showReplies && (\n        <button\n          onClick={handleToggleReplies}\n          className=\"text-sm text-blue-500 hover:underline\"\n          type=\"button\"\n          disabled={loadingReplies}\n        >\n          {loadingReplies ? '로딩 중...' : (<><ChevronDown className=\"w-5 h-5 inline-block\" />{` 답글 ${reply_count}개`}</>)}\n        </button>\n      )}\n\n      {/* 답글 리스트 열렸을 때 */}\n      {showReplies && (\n        <>\n          <ul className=\"ml-6 mt-3 space-y-4 border-l-2 border-gray-300 pl-4\">\n            {replies.map((reply) => (\n              <li\n                key={reply.comment_id}\n                ref={reply.comment_id === newlyAddedReplyId ? repliesStartRef : null}\n              >\n                <div className=\"flex items-center space-x-2 text-gray-800 font-semibold text-base\">\n                  <span>{reply.author_nickname}</span>\n                  <span className=\"text-xs text-gray-400\">\n                    {new Date(reply.created_at * 1000).toLocaleString()}\n                  </span>\n                </div>\n                <div className=\"text-gray-700\">{reply.content}</div>\n              </li>\n            ))}\n          </ul>\n\n          {/* 남은 답글이 있으면 답글 더보기 버튼 표시 */}\n          {remainingRepliesCount > 0 && (\n            <button\n              onClick={fetchMoreReplies}\n              className=\"text-sm text-blue-500 hover:underline mt-2\"\n              disabled={loadingReplies}\n              type=\"button\"\n            >\n              {loadingReplies ? '로딩 중...' : (<><ChevronDown className=\"w-4 h-4\" />{`답글 ${remainingRepliesCount}개`}</>\n)}\n            </button>\n          )}\n\n          {/* 답글 숨기기 버튼은 오른쪽 정렬 */}\n          <div className=\"flex justify-end mt-2\">\n            <button\n              onClick={handleToggleReplies}\n              className=\"text-sm text-blue-500 hover:underline\"\n              type=\"button\"\n            >\n              답글 숨기기\n            </button>\n          </div>\n        </>\n      )}\n    </li>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}